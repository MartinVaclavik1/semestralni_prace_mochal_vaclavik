<Window x:Class="semestralni_prace_mochal_vaclavik.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        xmlns:local="clr-namespace:semestralni_prace_mochal_vaclavik"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        mc:Ignorable="d"
        Title="Informační systém Policie České Rapubliky" 
        Height="460" 
        Width="800">

    <Window.Resources>
        <local:TupleConverter x:Key="TupleConverter"/>
        <x:Array x:Key="SeznamRoli" Type="sys:String">
            <sys:String>administrator</sys:String>
            <sys:String>policista</sys:String>
            <sys:String>obcan</sys:String>
        </x:Array>
    </Window.Resources>

    <TabControl Name="Okna" 
                HorizontalAlignment="Stretch" 
                VerticalAlignment="Stretch">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="SelectionChanged">
                <i:InvokeCommandAction Command="{Binding ZmenaOknaCommand}"/>
            </i:EventTrigger>
        </i:Interaction.Triggers>
        <TabControl.Background>
            <!-- Sjednocený horní gradient pro celou aplikaci -->
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="White" Offset="0"/>
                <GradientStop Color="#FF92A1C6" Offset="1"/>
            </LinearGradientBrush>
        </TabControl.Background>

        <!-- Karta: Domu (VIDITELNÉ VŽDY) -->
        <TabItem x:Name="Domu" Header="Domu">
            <Grid x:Name="DomuGrid" Background="White" Margin="20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition Width="20*"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <TextBlock x:Name="VítejteTxt" VerticalAlignment="Center" TextWrapping="Wrap" Height="346" Grid.Column="1"><Run FontWeight="Bold" Text="Vítejte na informačním portálu Policie České Republiky"/><LineBreak/><Run FontStyle="Italic" Text="Tento systém slouží k efektivní správě, monitoringu a koordinaci všech klíčových policejních operací a záznamů. Poskytuje rychlý a bezpečný přístup k relevantním informacím potřebným pro výkon služby."/><LineBreak/><Run/><LineBreak/><Run FontWeight="Bold" Text="Základní Funkce a Přehled:"/><LineBreak/><Run Language="cs-cz" Text=" - "/><Run Text="Kontakty: Rychlý přehled aktivních policistů, jejich hodností a aktuálního umístění na služebních stanicích."/><LineBreak/><Run Language="cs-cz" Text=" - "/><Run Text="Evidence Přestupků: Detailní záznamy o spáchaných přestupcích s možností vyhledávání a klasifikace."/><LineBreak/><Run Language="cs-cz" Text=" - "/><Run Text="Okrsky a Hlídky: Správa a přehled přidělených okrsků a monitorování aktivních hlídek v terénu."/><LineBreak/><Run/><LineBreak/><Run FontWeight="Bold" Text="Můj Účet:"/><LineBreak/><Run Language="cs-cz" Text=" - "/><Run Text="Přihlášeným uživatelům je k dispozici sekce pro správu osobních údajů."/><LineBreak/><Run/><LineBreak/><Run FontWeight="Bold" Text="Důležité Upozornění:"/><LineBreak/><Run FontStyle="Italic" Text="Tento portál pracuje s citlivými a osobními údaji. Přístup k datům podléhá přísným bezpečnostním standardům a je omezen pouze na autorizované pracovníky Policie ČR. Pro plný přístup se prosím přihlaste."/></TextBlock>
            </Grid>
        </TabItem>

        <!-- Karta: Kontakty (OPRÁVNĚNÍ: Občan+) -->
        <TabItem x:Name="Kontakty" Header="Kontakty"
                 Visibility="{Binding KontaktyVisible}" Height="22" Margin="-2,0,-2,0" VerticalAlignment="Bottom">
            <Grid Background="White">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="16*"/>
                    <ColumnDefinition Width="11*"/>
                    <ColumnDefinition Width="438*"/>
                    <ColumnDefinition Width="85*"/>
                    <ColumnDefinition Width="259*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="2*"/>
                    <RowDefinition Height="10*"/>
                    <RowDefinition Height="3*"/>
                </Grid.RowDefinitions>

                <Label x:Name="KontaktyNazev" Content="Policisté" Margin="10,10,0,171" FontSize="20" FontWeight="Bold" Grid.ColumnSpan="5" Grid.RowSpan="2"/>

                <StackPanel Orientation="Horizontal" Margin="10,2,10,233" Grid.ColumnSpan="5" Grid.Row="1"/>

                <DataGrid x:Name="KontaktyGrid" Grid.Row="1" 
                          d:ItemsSource="{d:SampleData ItemCount=5}" 
                          Margin="10,14,10,4" 
                          Grid.ColumnSpan="5" 
                          SelectionMode="Single"
                          SelectionUnit="Cell"
                          IsManipulationEnabled="True"
                          AutoGenerateColumns="False">

                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID" Binding="{Binding IDPOLICISTY}" Width="*" Visibility="Collapsed"/>
                        <DataGridTextColumn Header="Jméno" Binding="{Binding JMENO}" Width="*"/>
                        <DataGridTextColumn Header="Příjmení" Binding="{Binding PRIJMENI}" Width="*"/>
                        <DataGridTextColumn Header="Hodnost" Binding="{Binding HODNOST}" Width="*"/>
                        <DataGridTextColumn Header="Jméno nadřízeného" Binding="{Binding NADRIZENY}" Width="*"/>
                        <DataGridTextColumn Header="Stanice" Binding="{Binding STANICE}" Width="2*"/>

                        <DataGridTemplateColumn Header="" Width="SizeToCells">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Upravit" 
                                            Command="{Binding DataContext.UpravitKontaktyCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                            CommandParameter="{Binding}" 
                                            Margin="1,1" 
                                            Visibility="{Binding DataContext.AdminControlsVisible, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTemplateColumn Header="" Width="SizeToCells">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Odebrat"
                                            Command="{Binding DataContext.OdebratKontaktyCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                            CommandParameter="{Binding}" 
                                            Margin="1,1" 
                                            Visibility="{Binding DataContext.AdminControlsVisible, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>

                        </DataGridTemplateColumn>
                    </DataGrid.Columns>

                </DataGrid>
                <Grid Grid.Column="1" Grid.Row="2" Grid.ColumnSpan="4" Margin="0,10,10,10" Visibility="{Binding KontaktyVisible}">
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="Jméno" HorizontalAlignment="Left" Margin="10,0,0,0" VerticalAlignment="Center"/>
                    <Label Grid.Column="1" Content="Příjmení" HorizontalAlignment="Left" Margin="10,0,0,0" VerticalAlignment="Center"/>
                    <Label Grid.Column="2" Content="Hodnost" HorizontalAlignment="Left" Margin="10,0,0,0" VerticalAlignment="Center"/>
                    <Label Grid.Column="3" Content="Nadřízený" HorizontalAlignment="Left" Margin="10,0,0,0" VerticalAlignment="Center"/>
                    <Label Grid.Column="4" Content="Stanice" HorizontalAlignment="Left" Margin="10,0,0,0" VerticalAlignment="Center"/>
                    <TextBox x:Name="pridatKontaktyJmeno" HorizontalAlignment="Center" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Center" Width="120"/>
                    <TextBox x:Name="pridatKontaktyPrijmeni" HorizontalAlignment="Center" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Center" Width="120" Grid.Column="1"/>
                    <TextBox x:Name="pridatKontaktyHodnost" HorizontalAlignment="Center" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Center" Width="120" Grid.Column="2"/>
                    <TextBox x:Name="pridatKontaktyNadrizeny" HorizontalAlignment="Center" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Center" Width="120" Grid.Column="3"/>
                    <TextBox x:Name="pridatKontaktyStanice" HorizontalAlignment="Center" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Center" Width="120" Grid.Column="4"/>
                    <Button Grid.Column="5" Content="Přidat" HorizontalAlignment="Center" Grid.Row="1" VerticalAlignment="Center" Width="108"/>
                </Grid>
            </Grid>
        </TabItem>

        <!-- Karta: Okrsky (OPRÁVNĚNÍ: Policista+) - NOVÁ STRUKTURA S FILTRY A GRIDEM -->
        <TabItem x:Name="Okrsky" Header="Okrsky"
                 Visibility="{Binding OkrskyVisible}">
            <Grid Background="White">
                <Grid.RowDefinitions>
                    <RowDefinition Height="2*"/>
                    <RowDefinition Height="10*"/>
                    <RowDefinition Height="3*"/>
                </Grid.RowDefinitions>

                <!-- Nadpis -->
                <Label x:Name="OkrskyNazev" Content="Přehled Okrsků" Margin="10,5,0,5" FontSize="20" FontWeight="Bold"/>

                <!-- Filtry -->

                <!-- DataGrid -->
                <DataGrid x:Name="OkrskyGrid" 
                  d:ItemsSource="{d:SampleData ItemCount=5}" 
                  Margin="10,10,10,10"
                  SelectionMode="Single"
                  SelectionUnit="Cell"
                  IsManipulationEnabled="True"
                  AutoGenerateColumns="False" Grid.Row="1">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID Okrsku" Binding="{Binding IDOKRSKU}" Width="*" Visibility="Collapsed"/>
                        <DataGridTextColumn Header="Název Okrsku" Binding="{Binding NAZEV}" Width="*"/>
                        <DataGridTemplateColumn Header="" Width="SizeToCells">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Upravit" 
                                            Command="{Binding DataContext.UpravitOkrsekCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                            CommandParameter="{Binding}" 
                                            Margin="1,1" 
                                            Visibility="{Binding DataContext.AdminControlsVisible, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTemplateColumn Header="" Width="SizeToCells">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Odebrat" 
                                            Command="{Binding DataContext.OdebratOkrsekCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                            CommandParameter="{Binding}" 
                                            Margin="1,1" 
                                            Visibility="{Binding DataContext.AdminControlsVisible, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
                <Grid Grid.Row="2" Margin="10,10,10,10" Visibility="{Binding KontaktyVisible}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="155*"/>
                        <ColumnDefinition Width="141*"/>
                        <ColumnDefinition Width="478*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Button Grid.Column="1" Content="Přidat" HorizontalAlignment="Left" Grid.Row="1" VerticalAlignment="Center" Width="90" Height="20" Margin="10,0,0,0"/>
                    <Label Content="Název Okrsku" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="10,0,0,0" Height="26" Width="120"/>
                    <TextBox x:Name="pridatOkrsekNazev" HorizontalAlignment="Center" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Center" Width="135" Height="18"/>
                </Grid>

            </Grid>
        </TabItem>

        <!-- Karta: Evidence přestupků (OPRÁVNĚNÍ: Policista+) -->
        <TabItem x:Name="Prestupky" Header="Evidence přestupků"
                 Visibility="{Binding PrestupkyVisible}">
            <Grid Background="White">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="61*"/>
                    <RowDefinition Height="255*"/>
                    <RowDefinition Height="76*"/>
                </Grid.RowDefinitions>

                <!-- Nadpis -->
                <Label x:Name="KontaktyNazev1" Content="Evidence Přestupků" Margin="10,10,10,10" FontSize="20" FontWeight="Bold"/>

                <!-- Filtry -->
                <StackPanel Orientation="Horizontal" Margin="10,51,10,10"/>

                <!-- DataGrid -->
                <DataGrid x:Name="PrestupkyGrid" Grid.Row="1" 
                  d:ItemsSource="{d:SampleData ItemCount=5}"
                  SelectionMode="Single"
                  SelectionUnit="Cell"
                  IsManipulationEnabled="True"
                  Margin="10,0,10,10"
                  AutoGenerateColumns="False">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID přestupku" Binding="{Binding IDPRESTUPKU}" Width="*" Visibility="Collapsed"/>
                        <DataGridTextColumn Header="Typ přestupku" Binding="{Binding PRESTUPEK}" Width="*"/>
                        <DataGridTextColumn Header="Datum" Binding="{Binding DATUM}" Width="*"/>
                        <DataGridTextColumn Header="Jméno Občana" Binding="{Binding JMENOOBCANA}" Width="*"/>
                        <DataGridTextColumn Header="Poznámka" Binding="{Binding POZNAMKA}" Width="*"/>

                        <DataGridTemplateColumn Header="" Width="SizeToCells">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Upravit" 
                                            Command="{Binding DataContext.UpravitPrestupekCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                            CommandParameter="{Binding}" 
                                            Margin="1,1" 
                                            Visibility="{Binding DataContext.AdminControlsVisible, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTemplateColumn Header="" Width="SizeToCells">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Odebrat" 
                                            Command="{Binding DataContext.OdebratPrestupekCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                            CommandParameter="{Binding}" 
                                            Margin="1,1" 
                                            Visibility="{Binding DataContext.AdminControlsVisible, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
                <Grid Grid.Row="2" Margin="10,10,10,10" Visibility="{Binding KontaktyVisible}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Label Content="Typ přestupku" HorizontalAlignment="Left" Margin="10,0,0,0" VerticalAlignment="Center"/>
                    <Label Content="Datum" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Column="1" Margin="10,0,0,0"/>
                    <Label Content="Celé jméno občana" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Column="2" Margin="10,0,0,0"/>
                    <Label Content="Poznámka" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Column="3" Margin="10,0,0,0"/>

                    <TextBox x:Name="pridatPrestupekTyp" HorizontalAlignment="Center" Grid.Row="1" TextWrapping="Wrap"  VerticalAlignment="Center" Width="135"/>
                    <TextBox x:Name="pridatPrestupekDatum" HorizontalAlignment="Center" Grid.Row="1" TextWrapping="Wrap"  VerticalAlignment="Center" Width="135" Grid.Column="1"/>
                    <TextBox x:Name="pridatPrestupekObcan" HorizontalAlignment="Center" Grid.Row="1" TextWrapping="Wrap"  VerticalAlignment="Center" Width="134" Grid.Column="2"/>
                    <TextBox x:Name="pridatPrestupekPoznamka" HorizontalAlignment="Center" Grid.Row="1" TextWrapping="Wrap"  VerticalAlignment="Center" Width="135" Grid.Column="3"/>
                    <Button Grid.Column="4" Content="Přidat" HorizontalAlignment="Center" Grid.Row="1" VerticalAlignment="Center" Width="134"/>

                </Grid>
            </Grid>
        </TabItem>

        <TabItem x:Name="MojePrestupky" Header="Moje Přestupky">
            <Grid>
                <DataGrid d:ItemsSource="{d:SampleData ItemCount=5}" Margin="10,10"/>
            </Grid>
        </TabItem>

        <!-- Karta: Hlídky a Zásahy (OPRÁVNĚNÍ: Policista+) - PŘIDÁNY FILTRY -->
        <TabItem x:Name="Hlidky" Header="Hlídky"
                 Visibility="{Binding HlidkyVisible}">
            <Grid Background="White">
                <Grid.RowDefinitions>
                    <RowDefinition Height="2*"/>
                    <RowDefinition Height="10*"/>
                    <RowDefinition Height="3*"/>
                </Grid.RowDefinitions>

                <!-- Nadpis -->
                <Label Content="Evidence Hlídek" Margin="10,5,0,5" FontSize="20" FontWeight="Bold"/>

                <!-- Filtry -->
                <StackPanel Orientation="Horizontal" Margin="10,37,10,312" Grid.Row="1"/>

                <!-- DataGrid -->
                <DataGrid x:Name="HlidkyGrid" 
                  d:ItemsSource="{d:SampleData ItemCount=5}" 
                  Margin="10,10,10,6" 
                  SelectionMode="Single"
                  SelectionUnit="Cell"
                  IsManipulationEnabled="True"
                  AutoGenerateColumns="False" Grid.Row="1">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID Hlídky" Binding="{Binding IDHLIDKY}" Width="*" Visibility="Hidden"/>
                        <DataGridTextColumn Header="Název" Binding="{Binding NAZEVHLIDKY}" Width="*"/>
                        <DataGridTextColumn Header="Typ" Binding="{Binding NAZEV}" Width="*"/>
                        <DataGridTemplateColumn Header="" Width="SizeToCells">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Upravit" Command="{Binding UpravitHlidkuCommand}" Margin="1,1" Visibility="{Binding DataContext.AdminControlsVisible, RelativeSource={RelativeSource AncestorType={x:Type TabControl}}}"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTemplateColumn Header="" Width="SizeToCells">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Odebrat" Command="{Binding OdebratHlidkuCommand}" Margin="1,1" Visibility="{Binding DataContext.AdminControlsVisible, RelativeSource={RelativeSource AncestorType={x:Type TabControl}}}"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
                <Grid Grid.Row="2" Margin="10,10,10,10" Visibility="{Binding KontaktyVisible}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="3*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Label Content="Název hlídky" HorizontalAlignment="Left" Margin="10,0,0,0" VerticalAlignment="Center"/>
                    <Label Content="Typ" HorizontalAlignment="Left" Margin="10,0,0,0" VerticalAlignment="Center" Grid.Column="1"/>
                    <Button Grid.Column="2" Content="Přidat" HorizontalAlignment="Center" Grid.Row="1" VerticalAlignment="Center" Width="109"/>
                    <TextBox x:Name="pridatHlidkuNazev" HorizontalAlignment="Center" Margin="0,5,0,0" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Top" Width="120"/>
                    <TextBox x:Name="pridatHlidkuTyp" Grid.Column="1" HorizontalAlignment="Center" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Center" Width="120"/>
                </Grid>
            </Grid>
        </TabItem>

        <!-- Karta: Můj účet (OPRÁVNĚNÍ: Všichni přihlášení, Editace pro Policista+) -->
        <TabItem x:Name="Ucet" Header="Můj účet"
                 Visibility="{Binding UcetVisible}">
            <Grid x:Name="UcetGrid" Margin="10" Background="White">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="148*"/>
                    <ColumnDefinition Width="115*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition/>
                </Grid.RowDefinitions>

                <!-- Nadpis -->
                <Label x:Name="Nazev" Content="VÁŠ ÚČET" FontSize="24" FontWeight="Bold" Margin="10,5,0,10" HorizontalAlignment="Left" Width="434"/>

                <!-- Formulář pro editaci účtu -->
                <Grid Grid.Row="1" Margin="0,0,0,24" Grid.ColumnSpan="2">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Popisky a pole -->
                    <Label Content="Jméno:" FontWeight="Bold" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,5,10,5"/>
                    <Label Content="Příjmení:" Grid.Row="1" FontWeight="Bold" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,5,10,5"/>
                    <Label Content="Přihlašovací Jméno:" Grid.Row="2" FontWeight="Bold" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,5,10,5"/>
                    <Label Content="Heslo:" Grid.Row="3" FontWeight="Bold" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,5,10,5"/>
                    <!--<Label Content="PSČ:" Grid.Row="4" FontWeight="Bold" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,5,10,5"/>
                    <Label Content="Země:" Grid.Row="5" FontWeight="Bold" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,5,10,5"/>-->

                    <TextBox x:Name="JmenoTxt" Text="{Binding Uzivatel.Jmeno, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="250" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="131,10,0,0" Grid.ColumnSpan="2"/>
                    <TextBox x:Name="PrijmeniTxt" Text="{Binding Uzivatel.Prijmeni, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="250" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Row="1" Grid.Column="1" Margin="0,5,0,5"/>
                    <TextBox x:Name="UsernameTxt" Text="{Binding Uzivatel.Username, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="250" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Row="2" Grid.Column="1" Margin="0,5,0,5"/>
                    <TextBox x:Name="HesloTxt" Text="{Binding Uzivatel.Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="250" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Row="3" Grid.Column="1" Margin="0,5,0,5"/>
                    <!--<TextBox x:Name="PSCTxt" Text="000 00" Width="250" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Row="4" Grid.Column="1" Margin="0,5,0,5"/>
                    <TextBox x:Name="ZemeTxt" Text="Česká republika" Width="250" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Row="5" Grid.Column="1" Margin="0,5,0,5"/>-->
                </Grid>

                <!-- Tlačítko Potvrdit (OPRÁVNĚNÍ: Policista+) -->
                <Button x:Name="PotvrditBtn" 
                        Grid.Row="1" 
                        Content="Potvrdit" 
                        HorizontalAlignment="Left" 
                        VerticalAlignment="Top" 
                        Width="100" 
                        FontWeight="Bold"
                        Command="{Binding AktualizovatUcetCommand}"
                        IsEnabled="True" Height="20" Margin="194,165,0,0"/>

                <Button x:Name="OdhlasitBtn" 
                    Grid.Row="1" 
                    Content="Odhlásit se" 
                    HorizontalAlignment="Left" 
                    VerticalAlignment="Top" 
                    Width="100" 
                    Command="{Binding OdhlasCommand}"
                    FontWeight="Bold" 
                    Height="20" Margin="194,190,0,0"/>
                <Image Margin="10,10,16,90" Grid.Row="1" Source="{Binding Uzivatel.Obrazek, Mode=TwoWay, UpdateSourceTrigger=propertyChanged}" Grid.Column="1"/>
                <Label Content="Profilový obrázek" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                <Button Grid.Column="1" Content="Nahrát obrázek" Margin="68,247,177,0" Grid.Row="1" Command="{Binding NahratImgCommand}" Height="29" VerticalAlignment="Top"/>
                <Button Grid.Column="1" Content="Odebrat" Margin="172,247,71,0" Grid.Row="1" Command="{Binding OdebratImgCommand}" Height="29" VerticalAlignment="Top"/>

            </Grid>
        </TabItem>

        <!-- Karta: Admin nastavení (OPRÁVNĚNÍ: Admin) -->
        <TabItem x:Name="Admin" Header="Admin nastavení"
                 Visibility="{Binding AdminVisible}">
            <Grid Background="White">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Řádek 0: Filtry a Zobrazení (OPRÁVNĚNÍ: Admin) -->

                <DataGrid x:Name="UzivateleGrid"
                  d:ItemsSource="{d:SampleData ItemCount=5}"
                  ItemsSource="{Binding Users}"
                  Margin="15,10,20,10"
                  SelectionMode="Single"
                  SelectionUnit="Cell"
                  IsManipulationEnabled="True"
                  AutoGenerateColumns="False">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Přihlašovací jméno" Binding="{Binding Username}" Width="*"/>
                        <DataGridTextColumn Header="Heslo" Binding="{Binding Password}" Width="*"/>
                        <DataGridTemplateColumn Header="Oprávnění" Width="*">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <ComboBox ItemsSource="{Binding DataContext.OpravneniSeznamy, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                                SelectedItem="{Binding Opravneni, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>

                            <DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <ComboBox ItemsSource="{Binding DataContext.OpravneniSeznamy, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                              
                                              SelectedItem="{Binding Opravneni, Mode=TwoWay, UpdateSourceTrigger=Explicit}"
                                               />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellEditingTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTemplateColumn Header="Emulovat">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Emulovat"
                                            Command="{Binding DataContext.EmulovatCommand, 
                                                              RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                            CommandParameter="{Binding}" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn Header="Uložit">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Uložit"
                                            Command="{Binding DataContext.UpravitUzivateleCommand, 
                                                              RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                            CommandParameter="{Binding}" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn Header="Odebrat">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Odebrat"
                                            Command="{Binding DataContext.OdebratUzivateleCommand, 
                                                              RelativeSource={RelativeSource AncestorType={x:Type Window}}}"
                                            CommandParameter="{Binding}" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
                <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="15,0,15,0" VerticalAlignment="Center">
                    <Label Content="Akce:" FontWeight="Bold" VerticalAlignment="Center" Margin="0,0,6,0"/>
                </StackPanel>
            </Grid>
        </TabItem>
        <TabItem x:Name="LogovaciTabulka" Header="Logovací tabulka">
            <Grid Margin="20">
                <DataGrid x:Name="logovaciTabulkaGrid" d:ItemsSource="{d:SampleData ItemCount=5}" AutoGenerateColumns="True"/>

            </Grid>
        </TabItem>
        <TabItem x:Name="SystemovyKatalog" Header="Systémový katalog">
            <Grid Margin="20">
                <DataGrid x:Name="systemovyKatalogGrid" d:ItemsSource="{d:SampleData ItemCount=5}" AutoGenerateColumns="True"/>

            </Grid>
        </TabItem>
        <TabItem x:Name="Prihlaseni" Header="Přihlášení">
            <Grid Margin="10,0,0,0" HorizontalAlignment="Left" Width="779">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="29.96"/>
                    <RowDefinition Height="30"/>
                    <RowDefinition Height="130"/>
                </Grid.RowDefinitions>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>

                <TextBlock Text="Přihlašovací jméno:" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="278,0,0,0" Height="16" Width="101"/>

                <TextBox x:Name="UsernameTextBox" Margin="12,5,177,5" Grid.Row="0" Grid.Column="1"/>

                <TextBlock Text="Heslo:" VerticalAlignment="Center" Margin="347,0,0,0" Grid.Row="1" Grid.Column="0" HorizontalAlignment="Left" Height="16" Width="32"/>

                <!--TODO předělat pak na passwordBox -->
                <TextBox x:Name="PasswordBox"  Margin="12,5,177,5" Grid.Row="1" Grid.Column="1"/>

                <Button Content="Přihlásit" Command="{Binding PrihlasCommand}" Width="100" HorizontalAlignment="Left" Margin="12,5,0,5" Grid.Row="2" Grid.Column="1">
                    <Button.CommandParameter>
                        <MultiBinding Converter="{StaticResource TupleConverter}">
                            <Binding ElementName="UsernameTextBox" Path="Text"/>
                            <Binding ElementName="PasswordBox" Path="Text"/>
                        </MultiBinding>
                    </Button.CommandParameter>
                </Button>

            </Grid>
        </TabItem>
        <TabItem x:Name="Registrace" Header="Registrace">
            <Grid Margin="19,20,21,20" Background="White">
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition Height="10*"/>
                </Grid.RowDefinitions>

                <Label Content="Registrace" FontSize="16" FontWeight="Bold" Margin="331,2,331,0"/>

                <StackPanel Width="483" HorizontalAlignment="Center" Margin="0,2,0,12" Grid.Row="1">

                    <StackPanel Orientation="Horizontal" Margin="1,1">
                        <Label Content="Jméno:" Width="120"/>
                        <TextBox x:Name="jmenoTxt" Text="{Binding NovaRegistrace.Jmeno, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="250" Height="20"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="1,1">
                        <Label Content="Příjmení:" Width="120"/>
                        <TextBox x:Name="prijmeniTxt" Text="{Binding NovaRegistrace.Prijmeni, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="250" Height="20"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="1,1">
                        <Label Content="Číslo OP:" Width="120"/>
                        <TextBox x:Name="opTxt" Text="{Binding NovaRegistrace.CisloOP, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="250" Height="20"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="1,1">
                        <Label Content="PSČ:" Width="120"/>
                        <TextBox x:Name="pscTxt" Text="{Binding NovaRegistrace.PSC, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="250" Height="20"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="1,1">
                        <Label Content="Ulice:" Width="120"/>
                        <TextBox x:Name="uliceTxt" Text="{Binding NovaRegistrace.Ulice, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="250" Height="20" />
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="1,1">
                        <Label Content="Číslo popsiné:" Width="120"/>
                        <TextBox x:Name="cpTxt" Text="{Binding NovaRegistrace.CisloPopisne, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="250" Height="20"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="1,1">
                        <Label Content="Obec:" Width="120"/>
                        <TextBox x:Name="obecTxt" Text="{Binding NovaRegistrace.Obec, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="250" Height="20"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="1,1">
                        <Label Content="Země:" Width="120"/>
                        <TextBox x:Name="zemeTxt" Text="{Binding NovaRegistrace.Zeme, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="250" Height="20"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="1,1">
                        <Label Content="Uživatleské jméno:" Width="120"/>
                        <TextBox x:Name="usernameTxt" Text="{Binding NovaRegistrace.Username, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="250" Height="20"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="1,1">
                        <Label Content="Heslo:" Width="120"/>
                        <TextBox x:Name="heslotxt" Text="{Binding NovaRegistrace.Heslo, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="250" Height="20"/>
                    </StackPanel>

                    <Button Content="Registrovat" Command="{Binding RegistrovatCommand}" Width="150" Height="24"/>
                </StackPanel>
            </Grid>
        </TabItem>
    </TabControl>
</Window>