<Window x:Class="semestralni_prace_mochal_vaclavik.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:semestralni_prace_mochal_vaclavik"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        mc:Ignorable="d"
        Title="Informační systém Policie České Rapubliky" 
        Height="450" 
        Width="815">

    <Window.Resources>
        <local:TupleConverter x:Key="TupleConverter"/>
    </Window.Resources>

    <TabControl Name="Okna" 
                HorizontalAlignment="Stretch" 
                VerticalAlignment="Stretch">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="SelectionChanged">
                <i:InvokeCommandAction Command="{Binding ZmenaOknaCommand}"/>
            </i:EventTrigger>
        </i:Interaction.Triggers>
        <TabControl.Background>
            <!-- Sjednocený horní gradient pro celou aplikaci -->
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="White" Offset="0"/>
                <GradientStop Color="#FF92A1C6" Offset="1"/>
            </LinearGradientBrush>
        </TabControl.Background>

        <!-- Karta: Domu (VIDITELNÉ VŽDY) -->
        <TabItem x:Name="Domu" Header="Domu">
            <Grid x:Name="DomuGrid" Background="White" Margin="20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition Width="20*"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <TextBlock x:Name="VítejteTxt" VerticalAlignment="Center" TextWrapping="Wrap" Height="346" Grid.Column="1"><Run FontWeight="Bold" Text="Vítejte na informačním portálu Policie České Republiky"/><LineBreak/><Run FontStyle="Italic" Text="Tento systém slouží k efektivní správě, monitoringu a koordinaci všech klíčových policejních operací a záznamů. Poskytuje rychlý a bezpečný přístup k relevantním informacím potřebným pro výkon služby."/><LineBreak/><Run/><LineBreak/><Run FontWeight="Bold" Text="Základní Funkce a Přehled:"/><LineBreak/><Run Language="cs-cz" Text=" - "/><Run Text="Kontakty: Rychlý přehled aktivních policistů, jejich hodností a aktuálního umístění na služebních stanicích."/><LineBreak/><Run Language="cs-cz" Text=" - "/><Run Text="Evidence Přestupků: Detailní záznamy o spáchaných přestupcích s možností vyhledávání a klasifikace."/><LineBreak/><Run Language="cs-cz" Text=" - "/><Run Text="Okrsky a Hlídky: Správa a přehled přidělených okrsků a monitorování aktivních hlídek v terénu."/><LineBreak/><Run/><LineBreak/><Run FontWeight="Bold" Text="Můj Účet:"/><LineBreak/><Run Language="cs-cz" Text=" - "/><Run Text="Přihlášeným uživatelům je k dispozici sekce pro správu osobních údajů."/><LineBreak/><Run/><LineBreak/><Run FontWeight="Bold" Text="Důležité Upozornění:"/><LineBreak/><Run FontStyle="Italic" Text="Tento portál pracuje s citlivými a osobními údaji. Přístup k datům podléhá přísným bezpečnostním standardům a je omezen pouze na autorizované pracovníky Policie ČR. Pro plný přístup se prosím přihlaste."/></TextBlock>
            </Grid>
        </TabItem>

        <!-- Karta: Kontakty (OPRÁVNĚNÍ: Občan+) -->
        <TabItem x:Name="Kontakty" Header="Kontakty"
                 Visibility="{Binding KontaktyVisible}">
            <Grid Background="White">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="16*"/>
                    <ColumnDefinition Width="11*"/>
                    <ColumnDefinition Width="438*"/>
                    <ColumnDefinition Width="85*"/>
                    <ColumnDefinition Width="259*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Nadpis -->
                <Label x:Name="KontaktyNazev" Content="Policisté" Margin="10,5,0,5" FontSize="20" FontWeight="Bold" Grid.ColumnSpan="5"/>

                <!-- Filtry -->
                <StackPanel Orientation="Horizontal" Grid.Row="1" Margin="10,0,10,10" Grid.ColumnSpan="5">
                    <TextBox x:Name="HledatTxt_kontakty" Text="Hledat" VerticalAlignment="Center" Width="212" Height="20" Margin="0,0,5,0" TextChanged="HledatTxt_kontakty_TextChanged"/>
                    <Button x:Name="Zobrazit_btn_kontakty" Content="Zobrazit" Click="Button_Click" Width="69" Height="20" Background="#FF0079FF" Foreground="White" FontWeight="Bold" FontSize="11" Margin="0,0,5,0"/>
                    <Button x:Name="ZrusFiltry_btn_kontakty" Content="Zrušit filtry" Click="Button_Click_1" Width="85" Height="20" Background="Red" Foreground="White" FontSize="11"/>
                </StackPanel>

                <!-- DataGrid -->
                <DataGrid x:Name="KontaktyGrid" Grid.Row="2" d:ItemsSource="{d:SampleData ItemCount=5}" Margin="10,0,10,10" Grid.ColumnSpan="5" SelectionMode="Single" IsManipulationEnabled="False"/>
            </Grid>
        </TabItem>

        <!-- Karta: Okrsky (OPRÁVNĚNÍ: Policista+) - NOVÁ STRUKTURA S FILTRY A GRIDEM -->
        <TabItem x:Name="Okrsky" Header="Okrsky"
                 Visibility="{Binding OkrskyVisible}">
            <Grid Background="White">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Nadpis -->
                <Label x:Name="OkrskyNazev" Content="Přehled Okrsků" Margin="10,5,0,5" FontSize="20" FontWeight="Bold"/>

                <!-- Filtry -->
                <StackPanel Orientation="Horizontal" Grid.Row="1" Margin="10,0,10,10">
                    <TextBox x:Name="HledatTxt_okrsky" Text="Hledat" VerticalAlignment="Center" Width="212" Height="20" Margin="0,0,5,0"/>
                    <Button x:Name="Zobrazit_btn_okrsky" Content="Zobrazit" Click="Button_Click" Width="69" Height="20" Background="#FF0079FF" Foreground="White" FontWeight="Bold" FontSize="11" Margin="0,0,5,0"/>
                    <Button x:Name="ZrusFiltry_btn_okrsky" Content="Zrušit filtry" Click="Button_Click_1" Width="85" Height="20" Background="Red" Foreground="White" FontSize="11"/>
                </StackPanel>

                <!-- DataGrid -->
                <DataGrid x:Name="OkrskyGrid" Grid.Row="2" d:ItemsSource="{d:SampleData ItemCount=5}" Margin="10,0,10,10"/>
            </Grid>
        </TabItem>

        <!-- Karta: Evidence přestupků (OPRÁVNĚNÍ: Policista+) -->
        <TabItem x:Name="Prestupky" Header="Evidence přestupků"
                 Visibility="{Binding PrestupkyVisible}">
            <Grid Background="White">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="214*"/>
                    <ColumnDefinition Width="595*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Nadpis -->
                <Label x:Name="KontaktyNazev1" Content="Evidence Přestupků" Margin="20,5,0,5" FontSize="20" FontWeight="Bold" Grid.ColumnSpan="2"/>

                <!-- Filtry -->
                <StackPanel Orientation="Horizontal" Grid.Row="1" Margin="10,0,10,10" Grid.ColumnSpan="2">
                    <TextBox x:Name="HledatTxt_prestupky" Text="Hledat" VerticalAlignment="Center" Width="212" Height="20" Margin="0,0,5,0"/>
                    <Button x:Name="Zobrazit_btn_prestupky" Content="Zobrazit" Click="Button_Click" Width="69" Height="20" Background="#FF0079FF" Foreground="White" FontWeight="Bold" FontSize="11" Margin="0,0,5,0"/>
                    <Button x:Name="ZrusFiltry_btn_prestupky" Content="Zrušit filtry" Click="Button_Click_1" Width="85" Height="20" Background="Red" Foreground="White" FontSize="11"/>
                </StackPanel>

                <!-- DataGrid -->
                <DataGrid x:Name="PrestupkyGrid" Grid.Row="2" d:ItemsSource="{d:SampleData ItemCount=5}" Margin="10,0,10,10" Grid.ColumnSpan="2"/>
            </Grid>

        </TabItem>

        <TabItem x:Name="MojePrestupky" Header="Moje Přestupky">


        </TabItem>

        <!-- Karta: Hlídky a Zásahy (OPRÁVNĚNÍ: Policista+) - PŘIDÁNY FILTRY -->
        <TabItem x:Name="Hlidky" Header="Hlídky a Zásahy"
                 Visibility="{Binding HlidkyVisible}">
            <Grid Background="White">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Nadpis -->
                <Label Content="Evidence Hlídek a Zásahů" Margin="10,5,0,5" FontSize="20" FontWeight="Bold"/>

                <!-- Filtry -->
                <StackPanel Orientation="Horizontal" Grid.Row="1" Margin="10,0,10,10">
                    <TextBox x:Name="HledatTxt_hlidky" Text="Hledat" VerticalAlignment="Center" Width="212" Height="20" Margin="0,0,5,0"/>
                    <Button x:Name="Zobrazit_btn_hlidky" Content="Zobrazit" Click="Button_Click" Width="69" Height="20" Background="#FF0079FF" Foreground="White" FontWeight="Bold" FontSize="11" Margin="0,0,5,0"/>
                    <Button x:Name="ZrusFiltry_btn_hlidky" Content="Zrušit filtry" Click="Button_Click_1" Width="85" Height="20" Background="Red" Foreground="White" FontSize="11"/>
                </StackPanel>

                <!-- DataGrid -->
                <DataGrid x:Name="HlidkyGrid" Grid.Row="2" d:ItemsSource="{d:SampleData ItemCount=5}" Margin="10,0,10,10"/>
            </Grid>
        </TabItem>

        <!-- Karta: Můj účet (OPRÁVNĚNÍ: Všichni přihlášení, Editace pro Policista+) -->
        <TabItem x:Name="Ucet" Header="Můj účet"
                 Visibility="{Binding UcetVisible}">
            <Grid x:Name="UcetGrid" Margin="10" Background="White">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition/>
                    <RowDefinition Height="Auto" MinHeight="41.157"/>
                </Grid.RowDefinitions>

                <!-- Nadpis -->
                <Label x:Name="Nazev" Content="VÁŠ ÚČET" FontSize="24" FontWeight="Bold" Margin="0,5,0,10"/>

                <!-- Formulář pro editaci účtu -->
                <Grid Grid.Row="1" Margin="0,0,0,24" Grid.RowSpan="2">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Popisky a pole -->
                    <Label Content="Jméno:" FontWeight="Bold" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,5,10,5"/>
                    <Label Content="Příjmení:" Grid.Row="1" FontWeight="Bold" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,5,10,5"/>
                    <Label Content="Přihlašovací Jméno:" Grid.Row="2" FontWeight="Bold" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,5,10,5"/>
                    <Label Content="Heslo:" Grid.Row="3" FontWeight="Bold" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,5,10,5"/>
                    <!--<Label Content="PSČ:" Grid.Row="4" FontWeight="Bold" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,5,10,5"/>
                    <Label Content="Země:" Grid.Row="5" FontWeight="Bold" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,5,10,5"/>-->

                    <TextBox x:Name="JmenoTxt" Text="{Binding Uzivatel.Jmeno, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="250" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="0,5,0,5" Grid.Column="1"/>
                    <TextBox x:Name="PrijmeniTxt" Text="{Binding Uzivatel.Prijmeni, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="250" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Row="1" Grid.Column="1" Margin="0,5,0,5"/>
                    <TextBox x:Name="UsernameTxt" Text="{Binding Uzivatel.Username, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="250" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Row="2" Grid.Column="1" Margin="0,5,0,5"/>
                    <TextBox x:Name="HesloTxt" Text="{Binding Uzivatel.Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="250" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Row="3" Grid.Column="1" Margin="0,5,0,5"/>
                    <!--<TextBox x:Name="PSCTxt" Text="000 00" Width="250" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Row="4" Grid.Column="1" Margin="0,5,0,5"/>
                    <TextBox x:Name="ZemeTxt" Text="Česká republika" Width="250" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Row="5" Grid.Column="1" Margin="0,5,0,5"/>-->
                </Grid>

                <!-- Tlačítko Potvrdit (OPRÁVNĚNÍ: Policista+) -->
                <Button x:Name="PotvrditBtn" 
                        Grid.Row="2" 
                        Content="Potvrdit" 
                        HorizontalAlignment="Center" 
                        VerticalAlignment="Center" 
                        Width="100" 
                        Click="PotvrditBtn_Click" 
                        FontWeight="Bold" 
                        IsEnabled="False" Height="20"/>

                <Button x:Name="OdhlasitBtn" 
                    Grid.Row="2" 
                    Content="Odhlásit se" 
                    HorizontalAlignment="Left" 
                    VerticalAlignment="Center" 
                    Width="100" 
                    Command="{Binding OdhlasCommand}"
                    FontWeight="Bold" 
                    Height="20" Margin="658,0,0,0"/>

            </Grid>
        </TabItem>

        <!-- Karta: Admin nastavení (OPRÁVNĚNÍ: Admin) -->
        <TabItem x:Name="Admin" Header="Admin nastavení"
                 Visibility="{Binding AdminVisible}">
            <Grid Background="White">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="555*"/>
                    <ColumnDefinition Width="13*"/>
                    <ColumnDefinition Width="241*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Řádek 0: Filtry a Zobrazení (OPRÁVNĚNÍ: Admin) -->
                <StackPanel Orientation="Horizontal" Margin="15,10,15,10"
                           Grid.ColumnSpan="3">
                    <TextBox x:Name="HledatTxt_admin" Text="Hledat" VerticalAlignment="Center" Width="212" Height="20" Margin="0,0,6,0"/>
                    <Button x:Name="Zobrazit_btn_admin" Content="Zobrazit" Click="Button_Click" Width="70" Height="20" Background="#FF0079FF" Foreground="White" FontWeight="Bold" FontSize="11" Margin="0,0,4,0"/>
                    <Button x:Name="ZrusFiltry_btn_admin" Content="Zrušit filtry" Click="Button_Click_1" Width="86" Height="20" Background="Red" Foreground="White" FontSize="11"/>
                </StackPanel>

                <DataGrid x:Name="UzivateleGrid"
          Grid.Row="1"
          d:ItemsSource="{d:SampleData ItemCount=5}"
          Margin="15,0,15,0"
          SelectionChanged="DataGrid_SelectionChanged"
          Grid.ColumnSpan="5"
          SelectionMode="Single"
          ScrollViewer.CanContentScroll="True"
          AutoGenerateColumns="True">
                    <DataGrid.Columns>
                        <DataGridTemplateColumn>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Emulovat"
                                            Command="{Binding DataContext.EmulovatCommand, 
                                                              RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                            CommandParameter="{Binding}" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Upravit" Command="{Binding UpravitCommand}" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
                <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="15,0,15,0" VerticalAlignment="Center"
                            Grid.ColumnSpan="3">
                    <Label Content="Akce:" FontWeight="Bold" VerticalAlignment="Center" Margin="0,0,6,0"/>
                    <Button x:Name="btnPridat" Content="Přidat" Width="100" Height="20"/>
                </StackPanel>
            </Grid>
        </TabItem>
        <TabItem x:Name="Prihlaseni" Header="Přihlášení">
            <Grid Margin="20">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition Width="5*"/>
                </Grid.ColumnDefinitions>

                <TextBlock Text="Přihlašovací jméno:" VerticalAlignment="Center" Margin="0,0,10,10" Grid.Row="0" Grid.Column="0"/>

                <TextBox x:Name="UsernameTextBox" Width="200" Margin="0,0,0,10" Grid.Row="0" Grid.Column="1"/>

                <TextBlock Text="Heslo:" VerticalAlignment="Center" Margin="0,0,10,10" Grid.Row="1" Grid.Column="0"/>

                <!--TODO předělat pak na passwordBox -->
                <TextBox x:Name="PasswordBox" Width="200"  Margin="0,0,0,10" Grid.Row="1" Grid.Column="1"/>

                <Button Content="Přihlásit" Command="{Binding PrihlasCommand}" Width="100" HorizontalAlignment="Center" Margin="0,10,0,0" Grid.Row="2" Grid.ColumnSpan="2">
                    <Button.CommandParameter>
                        <MultiBinding Converter="{StaticResource TupleConverter}">
                            <Binding ElementName="UsernameTextBox" Path="Text"/>
                            <Binding ElementName="PasswordBox" Path="Text"/>
                        </MultiBinding>
                    </Button.CommandParameter>
                </Button>

            </Grid>
        </TabItem>
    </TabControl>

</Window>