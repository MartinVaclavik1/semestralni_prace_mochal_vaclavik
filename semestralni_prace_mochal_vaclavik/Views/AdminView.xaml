<UserControl x:Class="semestralni_prace_mochal_vaclavik.Views.AdminView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:semestralni_prace_mochal_vaclavik.Views"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">

    <Grid Background="White">
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="10*"/>
            <RowDefinition Height="2*"/>
        </Grid.RowDefinitions>

        <!-- Řádek 0: Filtry a Zobrazení (OPRÁVNĚNÍ: Admin) -->

        <DataGrid x:Name="UzivateleGrid"
      d:ItemsSource="{d:SampleData ItemCount=5}"
      ItemsSource="{Binding Uzivatele}"
      Margin="10,10,10,10"
      SelectionMode="Single"
      SelectionUnit="Cell"
      IsManipulationEnabled="True"
      AutoGenerateColumns="False"
      CanUserAddRows="false">

            <DataGrid.Columns>
                <DataGridTextColumn Header="Přihlašovací jméno" Binding="{Binding Username}" Width="*"/>
                <DataGridTextColumn Header="Heslo" Binding="{Binding Password}" Width="*"/>

                <DataGridTemplateColumn Header="Oprávnění" Width="*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ComboBox ItemsSource="{Binding DataContext.OpravneniSeznam, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                    SelectedItem="{Binding Opravneni, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>

                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="Emulovat">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="Emulovat"
                                Command="{Binding DataContext.EmulovatCommand, 
                                                  RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                CommandParameter="{Binding}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn Header="Uložit">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="Uložit"
                                Command="{Binding DataContext.UpravitUzivateleCommand, 
                                                  RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                CommandParameter="{Binding}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn Header="Odebrat">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="Odebrat"
                                Command="{Binding DataContext.OdebratUzivateleCommand, 
                                                  RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                CommandParameter="{Binding}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="15,0,15,0" VerticalAlignment="Center"/>
        <Grid Grid.Row="1" Margin="10,0,10,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="3*"/>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="3*"/>
                <ColumnDefinition Width="3*"/>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <Label Content="Přihlašovací jméno" HorizontalAlignment="Left" VerticalAlignment="Center"/>
            <Label Grid.Column="1" Content="Heslo" HorizontalAlignment="Left" VerticalAlignment="Center"/>
            <Label Grid.Column="2" Content="Celé jméno policisty" HorizontalAlignment="Left" VerticalAlignment="Center"/>
            <Label Grid.Column="3" Content="Celé jméno občana" HorizontalAlignment="Left" VerticalAlignment="Center"/>
            <Label Grid.Column="4" Content="Oprávnění" HorizontalAlignment="Left" VerticalAlignment="Center"/>
            <ComboBox SelectedItem="{Binding NovyUzivatelOpravneni, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="3" HorizontalAlignment="Left" Grid.Row="1" VerticalAlignment="Center" Width="104" Margin="166,0,0,0" Grid.ColumnSpan="2" Height="17"
                 ItemsSource="{Binding DataContext.OpravneniSeznam, RelativeSource={RelativeSource AncestorType=Grid}}"/>
            <TextBox Text="{Binding NovyUzivatelJmenoObcana, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="2" Margin="166,0,10,0" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Center" Grid.ColumnSpan="2"/>
            <TextBox Text="{Binding NovyUzivatelJmenoPolicisty, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="1" Grid.ColumnSpan="2" Margin="110,0,10,0" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Center"/>
            <TextBox Text="{Binding NovyUzivatelPrihlasovaciJmeno, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="1" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Center" Margin="0,0,10,0"/>
            <TextBox Text="{Binding NovyUzivatelHeslo, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Center" Margin="0,0,10,0"/>
            <Button Command="{Binding PridatUzivateleCommand}" Grid.Column="5" Content="Přidat" HorizontalAlignment="Center" Grid.Row="1" VerticalAlignment="Center" Width="48"/>
        </Grid>
    </Grid>
</UserControl>
